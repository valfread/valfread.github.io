<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Noto+Sans+SC:wght@400;700&family=Noto+Serif+SC:wght@500;700&family=PT+Sans:wght@400;700&display=swap" rel="stylesheet">

<style>
    /* 1. 字体与全站链接基调 */
    *, *::before, *::after {
        font-family: 'PT Sans', 'Noto Sans SC', sans-serif !important;
        -webkit-font-smoothing: antialiased;
    }

    /* 定义动态深蓝色变量：适配暗色模式 */

    :root {
    /* 1. 定义我们的新颜色 */
    --color-deep-blue: #4169e1; /* 浅色模式下的蓝 */
    
    /* 2. 核心补丁：直接覆盖主题的原生主色变量 */
    /* 这样所有引用 --color-primary 的地方（如汉堡菜单）都会自动变蓝 */
    --color-primary: var(--color-deep-blue); 
}

/* 暗色模式下的同步更新 */
@media (prefers-color-scheme: dark) {
    :root {
        --color-deep-blue: #89b4fa; /* 我们之前选定的暗色模式亮蓝 */
        --color-primary: var(--color-deep-blue);
    }
}

    /* 2. 根源对齐与容器规格 */
    main, #main, .main-content, article, .post, .page {
        margin-top: 0 !important;
        padding-top: 0 !important;
    }

    .about-container, .links-container, .guestbook-container, .posts-container,
    .subscribe-container, .article-container, .posts {
        max-width: 736px !important;
        margin: 0 auto !important;
        padding: 3.5rem 1.5rem 2rem 1.5rem !important; 
        display: block !important;
        box-sizing: border-box !important;
    }

    /* 3. 标题秩序 */
    h1 {
        padding: 0 !important;
        margin: 0 0 3rem 0 !important; 
        line-height: 1.2 !important;
        border-bottom: none !important;
        font-family: 'Noto Sans SC', sans-serif !important;
        font-weight: 700 !important;
        font-size: 1.65rem !important;
        color: var(--color-text) !important; /* 适配暗色模式 */
    }

    /* 4. 正文颜色秩序：适配暗色模式 */
    .article-container .post-content,
    .about-container .about-content { 
        color: var(--color-text) !important; 
    }

    .guestbook-container .guestbook-content,
    .links-container .links-intro,
    .subscribe-container .subscribe-content { 
        color: var(--color-text) !important;
        opacity: 0.8; /* 高级灰效果在暗色模式下通过透明度实现 */
    }

    /* 5. 全站超链接颜色：统一适配变量 */
    a {
        color: var(--color-deep-blue) !important;
        text-decoration: none !important;
        transition: opacity 0.2s;
        border-bottom: none !important;
    }


    /* 6. Banner 图片秩序 */
    .custom-banner { width: 100% !important; margin: 0 !important; line-height: 0 !important; display: block !important; }
    .custom-banner img { 
        width: 100% !important; 
        height: 250px !important; 
        object-fit: cover !important; 
        display: block !important; 
        border-radius: 8px !important; 
    }

    /* 7. 文章列表页：三栏像素级对齐与颜色适配 */
    .year-group { margin-bottom: 0.5rem !important; }
    h2 { display: none !important; }

    .post-row {
        display: flex;
        align-items: baseline; 
        padding: 6px 0 !important; 
        font-size: 0.95rem;
        gap: 20px;
        border: none !important;
        line-height: 1.6 !important; 
    }

    .year-col {
        width: 60px;
        flex-shrink: 0;
        color: var(--color-deep-blue) !important; 
        font-weight: bold;
        font-family: 'PT Sans', sans-serif;
    }

    .info-col { flex-grow: 1; display: flex; gap: 15px; }
    .post-date { color: #888; flex-shrink: 0; width: 90px; }

    .post-title-link {
        color: var(--color-text) !important; /* 标题跟随主题色切换 */
        font-weight: 500 !important;
        text-decoration: none !important;
        border-bottom: none !important;
        padding-bottom: 0 !important;
    }
    .post-title-link:hover {
        color: var(--color-deep-blue) !important;
        text-decoration: none !important;
    }

    .tag-col { text-align: right; color: #aaa; font-size: 0.85rem; white-space: nowrap; }

    .list-inline-tag {
        color: var(--color-deep-blue) !important;
        text-decoration: none !important;
        margin-left: 8px;
        border-bottom: none !important;
    }

    .posts-list, .posts-item { border: none !important; margin: 0 !important; padding: 0 !important; }

    /* 8. 导航栏样式 */
    .navbar-link-list .navbar-link-item {
        font-family: 'Noto Serif SC', serif !important;
        font-weight: 700 !important;
        color: var(--color-deep-blue) !important;
    }
    .navbar-logo .logo-text { 
        font-family: jicaleta !important; 
        color: var(--color-text) !important; 
    }

.link-card:hover {
    border-color: var(--color-deep-blue) !important;
    background-color: rgba(30, 64, 175, 0.02); /* 淡淡的蓝底 */
}

/* 6. 核心修复：独立的 Banner 背景区域 */
    .page-banner {
    width: 100%;
    height: 180px;
    position: relative;
    overflow: hidden; /* 确保模糊边缘不溢出 */
    display: flex;
    align-items: center;
    justify-content: center;
    margin-bottom: 0;
    border-radius: 8px;

}

/* 伪元素承载背景：这样模糊效果只针对图片，不影响上方的文字标题 */
.page-banner::before {
    content: "";
    position: absolute;
    top: 0; left: 0; right: 0; bottom: 0;
    background: url('/brightcover.jpg') no-repeat center center;
    background-size: cover;
    
    /* 核心滤镜：5px 高斯模糊，降低饱和度，并让亮度微调 */
    filter: blur(0.15rem) saturate(1.05) brightness(1.05);
    
    /* 降低透明度，让底部的白色透上来，实现“柔和、淡雅”的效果 */
    opacity: 0.9;
    z-index: 1;
}

/* 7. 标题样式：由于背景已经模糊柔化，标题应保持严谨的清晰度 */
.page-banner h1 {
    position: relative;
    z-index: 2; /* 确保文字在模糊背景层之上 */
    color: #ffffff !important; 
    margin: 0 !important;
    font-size: 2.2rem !important;
    font-weight: 700 !important;
    letter-spacing: 1rem; /* 增加间距，提升精致感 */
    /* 核心修改：极其轻微的黑色阴影 */
    /* 坐标偏移(0px 2px) 模糊半径(4px) 颜色(半透明黑) */
    text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3); 
    
    opacity: 1; /* 既然有了影子，可以恢复 100% 不透明度，增加对比 */
    }

/* 深度定制引用样式 (Blockquote) */
.post-content blockquote {
    margin: 2rem 0;
    padding: 1rem 1.5rem;
    /* 采用更兼容的十六进制带透明度写法，或确保逗号间无全角空格 */
    background-color: rgba(100, 144, 255, 0.05); 
    /* 显式 fallback：如果变量失效，使用深蓝色作为保底 */
    border-left: 4px solid #6490ff; 
    border-left: 4px solid var(--color-deep-blue);
    border-radius: 0 4px 4px 0;
    font-style: italic;
    color: #555;
    display: block;        /* 强制引用块作为整体块级元素 */
    text-align: left;      /* 确保左对齐 */
    white-space: pre-wrap; /* 关键：保留 Markdown 中的换行逻辑 */
}

.post-content blockquote p {
    margin-bottom: 0 !important; /* 强制消除内部间距 */
    display: block;        /* 确保引用内的段落是纵向堆叠的 */
    margin: 0 0 0.8em 0;  /* 给歌词行之间留一点点间距 */
}

/* ---------------YouTube 视频居中容器 ----------------*/
.video-wrapper {
    display: flex;
    justify-content: center; /* 水平居中 */
    margin: 2.5rem 0;        /* 增加上下间距，符合 1.8 倍行高的节奏 */
}

/* 响应式支持：确保视频在手机上不溢出 */
.video-wrapper iframe {
    max-width: 100%;
    height: auto;
    aspect-ratio: 16 / 9; /* 锁定视频比例，防止变形 */
    border-radius: 8px;   /* 增加圆角，维持极简审美 */
}

/* 这一段就是解决“宽度闪动”的补丁 */
html {
        /* 强制显示滚动条占位符，防止页面左右闪动 */
        overflow-y: scroll !important;
}
        /* ------ 统一全站所有页面的容器规格，消除 46rem 与 800px 的冲突------- */
body {
    max-width: 736px !important; 
}

.about-container, .links-container, .guestbook-container, .posts-container,
.subscribe-container, .article-container, .posts {
    max-width: 100% !important; /* 让内部容器填满已限制为 800px 的 body */
    width: 100% !important;
    margin: 0 auto !important;
    padding: 3.5rem 1.5rem 2rem 1.5rem !important; 
    box-sizing: border-box !important;
}
</style>

<header>
    <nav class="navbar">
        <div class="navbar-top" id="top">
            <div class="navbar-logo">
                <a href="{{ .Site.BaseURL }}" class="logo-text" style="font-family: jicaleta;">
                    {{ if .Site.Params.logoImg }}
                        {{ $brand := resources.Get "/assets/imgs/logo.png" }}
                        <img src="{{ $brand.RelPermalink }}" alt="Logo Image"
                            class="logo-image {{ if .Site.Params.logoInvert }}logo-invert{{ end }}" loading="lazy">
                    {{ else }}
                        {{ .Site.Title }}
                    {{ end }}
                </a>
            </div>
            <div class="navbar-burger" id="navbar-burger">
                <span></span><span></span><span></span>
            </div>
        </div>
        <div class="navbar-menu" id="navbar-menu">
            <div class="navbar-link-list">
                <a href="/" class="navbar-link-item">主页</a>
                <a href="/posts/" class="navbar-link-item">文章</a>
                <a href="/guestbook/" class="navbar-link-item">留言</a>
                <a href="/links/" class="navbar-link-item">友链</a>
                <a href="/about/" class="navbar-link-item">关于</a>
                <a href="/subscribe/" class="navbar-link-item">订阅</a>
            </div>
            <div class="theme-toggle">
                <div id="theme-toggle-btn">
                    <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24">
                        <path fill="currentColor" d="M10 2c-1.82 0-3.53.5-5 1.35C8 5.08 10 8.3 10 12s-2 6.92-5 8.65C6.47 21.5 8.18 22 10 22a10 10 0 0 0 10-10A10 10 0 0 0 10 2" />
                    </svg>
                </div>
            </div>
        </div>
    </nav>

{{/* 只要户口在 pages 文件夹里，或者是列表页，就显示 Banner */}}
{{ if and (not .IsHome) (or (ne .Kind "page") (eq .Section "pages")) }}
    <section class="page-banner">
        <h1>{{ .Title }}</h1>
    </section>
{{ end }}
    
</header>

